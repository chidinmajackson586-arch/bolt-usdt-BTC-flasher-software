import{r as f,j as e,C as c,g as l,h as d,i as x,B as u,k as N,D as b,T as y}from"./index-CiR1mdvT.js";import{u as C}from"./useQuery-BI1ZR5Ft.js";import{R as T,A as w,C as S,X as F,Y as D,T as M,a as B,b as A}from"./AreaChart-i5bDDkVq.js";function R(){const[r,v]=f.useState("BTC"),[m,$]=f.useState("7d"),{data:a=[]}=C({queryKey:["/api/market/prices"],refetchInterval:3e4}),{data:o=[]}=C({queryKey:["/api/market/history",r,m],refetchInterval:6e4}),k=["BTC","ETH","BNB","TRX","SOL","USDT"],i=s=>s<1?`$${s.toFixed(6)}`:s<100?`$${s.toFixed(4)}`:`$${s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,h=s=>s>=1e12?`$${(s/1e12).toFixed(2)}T`:s>=1e9?`$${(s/1e9).toFixed(2)}B`:s>=1e6?`$${(s/1e6).toFixed(2)}M`:`$${s.toLocaleString()}`,j=s=>s>=1e9?`$${(s/1e9).toFixed(2)}B`:s>=1e6?`$${(s/1e6).toFixed(2)}M`:s>=1e3?`$${(s/1e3).toFixed(2)}K`:`$${s.toLocaleString()}`,p=s=>s>=0?"text-green-500":"text-red-500",g=s=>s>=0?e.jsx(y,{className:"w-4 h-4"}):e.jsx(A,{className:"w-4 h-4"}),t=a.find(s=>s.symbol===r);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Market Charts"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Real-time cryptocurrency market data"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.slice(0,4).map(s=>e.jsx(c,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:s.symbol}),e.jsx("p",{className:"text-2xl font-bold",children:i(s.price)})]}),e.jsxs("div",{className:`flex items-center space-x-1 ${p(s.change24h)}`,children:[g(s.change24h),e.jsxs("span",{className:"text-sm font-medium",children:[s.change24h>0?"+":"",s.change24h.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Volume"}),e.jsx("span",{className:"font-medium",children:j(s.volume24h)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Market Cap"}),e.jsx("span",{className:"font-medium",children:h(s.marketCap)})]})]})]})},s.symbol))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(x,{children:"Select Cryptocurrency"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2",children:k.map(s=>e.jsx(u,{variant:r===s?"default":"outline",className:"justify-start",onClick:()=>v(s),children:s},s))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Timeframe"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["1d","7d","30d","90d"].map(s=>e.jsx(u,{variant:m===s?"default":"outline",size:"sm",onClick:()=>$(s),children:s},s))})]})]})]}),e.jsxs(c,{className:"lg:col-span-3",children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:[r," Price Chart"]}),t&&e.jsxs("div",{className:`flex items-center space-x-1 ${p(t.change24h)}`,children:[g(t.change24h),e.jsx("span",{className:"text-lg font-bold",children:i(t.price)}),e.jsxs("span",{className:"text-sm",children:["(",t.change24h>0?"+":"",t.change24h.toFixed(2),"%)"]})]})]})}),e.jsx(l,{children:o.length>0?e.jsx(T,{width:"100%",height:400,children:e.jsxs(w,{data:o,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:.1})]})}),e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"date",tick:{fontSize:12}}),e.jsx(D,{domain:["dataMin","dataMax"],tick:{fontSize:12},tickFormatter:s=>i(s)}),e.jsx(M,{formatter:s=>[i(s),"Price"],labelFormatter:s=>`Date: ${s}`}),e.jsx(B,{type:"monotone",dataKey:"price",stroke:"#8884d8",strokeWidth:2,fillOpacity:1,fill:"url(#colorPrice)"})]})}):e.jsx("div",{className:"flex items-center justify-center h-400 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Loading chart data..."})]})})})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(x,{children:"Market Statistics"})}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"text-2xl font-bold",children:h(a.reduce((s,n)=>s+n.marketCap,0))}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Market Cap"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-2xl font-bold",children:j(a.reduce((s,n)=>s+n.volume24h,0))}),e.jsx("p",{className:"text-sm text-gray-500",children:"24h Volume"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("p",{className:"text-2xl font-bold",children:a.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tracked Assets"})]})]})})]})]})}export{R as default};
